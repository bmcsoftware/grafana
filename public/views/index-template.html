<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width" />
    <meta name="theme-color" content="#000" />

    <title>[[.AppTitle]]</title>

    <base href="[[.AppSubUrl]]/" />

    <link
      rel="preload"
      href="[[.ContentDeliveryURL]]public/fonts/roboto/RxZJdnzeo3R5zSexge8UUVtXRa8TVwTICgirnJhmVJw.woff2"
      as="font"
      crossorigin
    />

    <link rel="icon" type="image/png" href="[[.FavIcon]]" />
    <link rel="apple-touch-icon" sizes="180x180" href="[[.AppleTouchIcon]]" />
    <link rel="mask-icon" href="[[.ContentDeliveryURL]]public/img/grafana_mask_icon.svg" color="#F05A28" />

    [[ if eq .Theme "light" ]]
    <link rel="stylesheet" href="[[.ContentDeliveryURL]]public/build/<%= htmlWebpackPlugin.files.cssChunks.light %>" />
    [[ else ]]
    <link rel="stylesheet" href="[[.ContentDeliveryURL]]public/build/<%= htmlWebpackPlugin.files.cssChunks.dark %>" />
    [[ end ]]

<!-- BMC code -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap"
    rel="stylesheet" />
  <style>
    .logo::before,
    .logo-bmc-helix::before,
    .logo-helix::before,
    .logo-bmc::before {
      content: '';
      width: inherit;
      display: inline-block;
      vertical-align: bottom;
    }

    .logo-helix {
      background-image: url(public/img/bmc_helix_light.svg);
    }

    .logo-helix.logo-light {
      background-image: url(public/img/bmc_helix_dark.svg);
    }
  </style>
  <link rel="stylesheet" type="text/css" href="rebranding/custom_dashboard.css?ver=<%= compilation.hash %>" />
  <link rel="stylesheet" type="text/css"
    href="[[.ContentDeliveryURL]]public/app/features/gainsight/dist/AdaptAgreement/styles.css">
  <!-- End -->
  
    <script nonce="[[.Nonce]]">
      performance.mark('frontend_boot_css_time_seconds');
    </script>
    <!-- BMC Code -->
    <style>
      .sso-Container {
        z-index: 2000 !important;
      }
      .sso-ModalButton1 {
        display: inline-flex;
        -webkit-box-align: center;
        align-items: center;
        font-size: 14px;
        font-weight: 500;
        padding: 0px 15px;
        width: 52px !important;
        background: rgb(56, 113, 220) !important;
        color: rgb(255, 255, 255) !important;
        border: 1px solid transparent !important;
      }
    </style>
    <script nonce="[[.Nonce]]" src="/dashboards/_auth/resource/js/idle-timeout.js" type="text/javascript"></script>
    <!-- END -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="msapplication-TileColor" content="#2b5797" />
    <meta name="msapplication-config" content="public/img/browserconfig.xml" />
  </head>

  <body class="theme-[[ .Theme ]] [[.AppNameBodyClass]]">
    <style>
      .preloader {
      	/* BMC code - inline change */
      	height: 90vh;
        flex-direction: column;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .preloader__enter {
        opacity: 0;
        animation-name: preloader-fade-in;
        animation-iteration-count: 1;
        animation-duration: 0.9s;
        animation-delay: 1.35s;
        animation-fill-mode: forwards;
      }

    /* BMC code */
    .preloader__logo {
      display: inline-block;
      width: 200px;
      height: 100px;
      background-repeat: no-repeat;
      background-size: contain;
      /* background-image: url('[[.LoadingLogo]]'); */
    }

    .logo {
      display: inline-block;
      width: 200px;
      height: 100px;
      background-repeat: no-repeat;
      background-size: contain;
    }

    /* End */
      .preloader__text {
        margin-top: 16px;
      /* BMC code */
      font-weight: 300;
      font-size: 1.3125rem;
      text-align: center;
      font-family: 'Open Sans', 'Roboto', Sans-serif;
      /* End */
        opacity: 0;
        animation-name: preloader-fade-in;
        animation-duration: 0.9s;
        animation-delay: 1.8s;
        animation-fill-mode: forwards;
      }

      .theme-light .preloader__text {
        color: #52545c;
      }

      .theme-dark .preloader__text {
        color: #d8d9da;
      }

    /* BMC code */
    .theme-light .preloader__logo {
      /* background-image: url(public/img/bmc_helix_light.svg); */
    }

    .theme-dark .preloader__logo {
      /* background-image: url(public/img/bmc_helix_dark.svg); */
    }

    /* End */
      @keyframes preloader-fade-in {
        0% {
          opacity: 0;
          /*animation-timing-function: linear;*/
          animation-timing-function: cubic-bezier(0, 0, 0.5, 1);
        }
        100% {
          opacity: 1;
        }
      }

      @keyframes preloader-squash {
        0% {
          transform: scaleX(1.3) scaleY(0.8);
          animation-timing-function: cubic-bezier(0.3, 0, 0.1, 1);
          transform-origin: bottom center;
        }
        15% {
          transform: scaleX(0.75) scaleY(1.25);
          animation-timing-function: cubic-bezier(0, 0, 0.7, 0.75);
          transform-origin: bottom center;
        }
        55% {
          transform: scaleX(1.05) scaleY(0.95);
          animation-timing-function: cubic-bezier(0.9, 0, 1, 1);
          transform-origin: top center;
        }
        95% {
          transform: scaleX(0.75) scaleY(1.25);
          animation-timing-function: cubic-bezier(0, 0, 0, 1);
          transform-origin: bottom center;
        }
        100% {
          transform: scaleX(1.3) scaleY(0.8);
          transform-origin: bottom center;
          animation-timing-function: cubic-bezier(0, 0, 0.7, 1);
        }
      }

      /* Fail info */
      .preloader__text--fail {
        display: none;
      }

      /* stop logo animation */
    /* BMC code - inline change */
      .preloader--done .preloader__logo {
        animation-name: none;
        display: none;
      }

      .preloader--done .preloader__logo,
      .preloader--done .preloader__text {
        display: none;
      /* BMC code - next line */
      /* color: #ff5705 !important; */
        font-size: 15px;
      }

      .preloader--done .preloader__text--fail {
        display: block;
      }

    /* BMC code */
    .main_text {
      margin-top: 40px;
      font-size: 32px;
    }

    .sub_text {
      margin-top: 12px;
      font-size: 18px;
    }

    .bmc_links {
      color: #33a2e5;
    }

    .bmc_product_container {
      display: -webkit-box;
      display: -webkit-flex;
      display: -ms-flexbox;
      display: flex;
      flex: 0 0 auto;
      flex-flow: row;
      align-items: center;
      justify-content: center;
      -webkit-flex: 0 0 auto;
      -webkit-flex-flow: row;
      -webkit-box-pack: center;
      -webkit-align-items: center;
      -webkit-box-align: center;
      -webkit-justify-content: center;
      -ms-flex: 0 0 auto;
      -ms-flex-flow: row;
      -ms-flex-pack: center;
      -ms-flex-align: center;
      font-weight: 200;
      font-size: 1.3125rem;
      line-height: 1.875rem;
      font-family: 'Open Sans', 'Roboto', Sans-serif;
    }

    /* End */
      [ng\:cloak],
      [ng-cloak],
      .ng-cloak {
        display: none !important;
      }
    </style>

  <!-- BMC code -->
  <div class="preloader">
    <div class="preloader__enter">
      <div class="bmc_product_container">
        <div class='logo logo-helix [[if eq .Theme "dark" ]] logo-light [[end]]' style="
          width: 150px;
          height: 30px;
          background-size: contain;
          background-position: center right;
          background-repeat: no-repeat;
        "></div>
        <div style="padding: 0 10px">Dashboards</div>
      </div>
      <div class="preloader__text" style="font-size: 1.2rem">
        <i class="fa fa-spinner fa-spin"></i>
        <span>Loading...</span>
      </div>
    </div>
    <div class="text-center preloader__text preloader__text--fail">
      <div>
        <img src="public/img/bmc_app_failure_icon.svg" />
      </div>
      <div>
        <h3 class="main_text">Oops... we couldn't load that page.</h3>
      </div>
      <div>
        <span class="sub_text">The application has failed to load. Contact
          <a class="bmc_links" href="https://www.bmc.com/support" target="_blank">BMC Support</a>.</span>
      </div>
    </div>
    <!-- End -->
      <script nonce="[[.Nonce]]">
        // Check to see if browser is not supported by Grafana
        // Source file in app/core/utils/browser.ts & tests make edits there and copy compiled typescript here
        function checkBrowserCompatibility() {
          var isIE = navigator.userAgent.indexOf('MSIE') > -1;
          var isEdge = navigator.userAgent.indexOf('Edge/') > -1 || navigator.userAgent.indexOf('Edg/') > -1;
          var isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;
          var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);

          /* Check for
          <= IE11 (Trident 7)
          Edge <= 16
          Firefox <= 64
          Chrome <= 54
          */
          var isEdgeVersion = /Edge\/([0-9.]+)/.exec(navigator.userAgent);

          if (isIE && parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1]) <= 7) {
            return false;
          } else if (
            isEdge &&
            ((isEdgeVersion && parseFloat(isEdgeVersion[1]) <= 16) ||
              parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1]) <= 16)
          ) {
            return false;
          } else if (isFirefox && parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1]) <= 64) {
            return false;
          } else if (isChrome && parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1]) <= 54) {
            return false;
          }

          return true;
        }

        if (!checkBrowserCompatibility()) {
          alert('Your browser is not fully supported, please try newer version.');
        }
      </script>
    </div>

    <div id="reactRoot"></div>

    <script nonce="[[.Nonce]]">
      window.grafanaBootData = {
        user: [[.User]],
        settings: [[.Settings]],
        navTree: [[.NavTree]],
        themePaths: {
          light: '[[.ContentDeliveryURL]]public/build/<%= htmlWebpackPlugin.files.cssChunks.light %>',
          dark: '[[.ContentDeliveryURL]]public/build/<%= htmlWebpackPlugin.files.cssChunks.dark %>'
        }
      };

      window.__grafana_load_failed = function() {
        var preloader = document.getElementsByClassName("preloader");
        if (preloader.length) {
          preloader[0].className = "preloader preloader--done";
        }
      }

      // In case the js files fails to load the code below will show an info message.
      window.onload = function() {
        if (window.__grafana_app_bundle_loaded) {
          return;
        }
        window.__grafana_load_failed();
      };

      [[if .ContentDeliveryURL]]
        window.public_cdn_path = '[[.ContentDeliveryURL]]public/build/';
      [[end]]
      [[if .Nonce]]
        window.nonce = '[[.Nonce]]';
      [[end]]
    </script>

    <!-- BMC Code -->
    <script nonce="[[.Nonce]]">
      _AUTH_VALIDATION_DOMAIN = "/dashboards";
    </script>
    <!-- END -->

    [[if .GoogleTagManagerId]]
    <!-- Google Tag Manager -->
    <script nonce="[[.Nonce]]">
      dataLayer = [
        {
          IsSignedIn: '[[.User.IsSignedIn]]',
          Email: '[[.User.Email]]',
          Name: '[[.User.Name]]',
          UserId: '[[.User.Id]]',
          OrgId: '[[.User.OrgId]]',
          OrgName: '[[.User.OrgName]]',
        },
      ];
    </script>
    <noscript>
      <iframe
        src="//www.googletagmanager.com/ns.html?id=[[.GoogleTagManagerId]]"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe>
    </noscript>
    <script nonce="[[.Nonce]]">
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', '[[.GoogleTagManagerId]]');
    </script>
    <!-- End Google Tag Manager -->
    [[end]] <% for (index in htmlWebpackPlugin.files.js) { %> <% if (htmlWebpackPlugin.files.jsIntegrity) { %>
    <script
      nonce="[[.Nonce]]"
      src="[[.ContentDeliveryURL]]<%= htmlWebpackPlugin.files.js[index] %>"
      type="text/javascript"
      integrity="<%= htmlWebpackPlugin.files.jsIntegrity[index] %>"
      crossorigin="<%= webpackConfig.output.crossOriginLoading %>"
    ></script>
    <% } else { %>
    <script
      nonce="[[.Nonce]]"
      src="[[.ContentDeliveryURL]]<%= htmlWebpackPlugin.files.js[index] %>"
      type="text/javascript"
    ></script>
    <% } %> <% } %>

    <script nonce="[[.Nonce]]">
      performance.mark('frontend_boot_js_done_time_seconds');
    </script>
  </body>
</html>
